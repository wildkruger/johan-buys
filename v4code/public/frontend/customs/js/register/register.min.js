"use strict";let hasPhoneError=!1,hasEmailError=!1;function enableDisableButton(){hasPhoneError||hasEmailError?$("form").find("button[type='submit']").prop("disabled",!0):$("form").find("button[type='submit']").prop("disabled",!1)}function updatePhoneInfo(){return new Promise(function(e,t){$("#defaultCountry").val($("#phone").intlTelInput("getSelectedCountryData").iso2),$("#carrierCode").val($("#phone").intlTelInput("getSelectedCountryData").dialCode),""!=$("#phone").val&&$("#formattedPhone").val($("#phone").intlTelInput("getNumber").replace(/-|\s/g,"")),e()})}function checkDuplicatePhoneNumber(){$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:SITE_URL+"/register/duplicate-phone-number-check",dataType:"json",cache:!1,data:{phone:$.trim($("#phone").val()),carrierCode:$.trim($("#phone").intlTelInput("getSelectedCountryData").dialCode)}}).done(function(e){hasPhoneError=e.status?($("#duplicate-phone-error").show().addClass("error").html(e.fail),!0):($("#duplicate-phone-error").html(""),!1),enableDisableButton()})}function validateInternationalPhoneNumber(){return new Promise(function(e,t){let n=!1;hasPhoneError=""!==$.trim($("#phone").val())?$("#phone").intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($("#phone").val()))?(n=!0,$("#tel-error").html(""),!1):($("#duplicate-phone-error").html(""),$("#tel-error").addClass("error").html(validPhoneNumberText),!0):($("#tel-error").html(""),!1),enableDisableButton(),e(n)})}function phoneValidityCheck(){updatePhoneInfo().then(()=>{validateInternationalPhoneNumber().then(e=>{e&&checkDuplicatePhoneNumber()})})}$("#personal-info-form").on("submit",function(){$("#registrationSubmitBtn").attr("disabled",!0),$("#rightAngle").addClass("d-none"),$(".spinner").removeClass("d-none"),$("#registrationSubmitBtnTxt").text(signingUpText)}),$("#phone").intlTelInput({separateDialCode:!0,nationalMode:!0,preferredCountries:[countryShortCode],autoPlaceholder:"polite",placeholderNumberType:"MOBILE",utilsScript:utilsJsScript}),$("#phone").on("countrychange",function(){phoneValidityCheck()}),$("#phone").on("blur",function(){phoneValidityCheck()}),$(document).ready(function(){$("#email").on("input",function(){var r=$("#email").val();$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:SITE_URL+"/user-registration-check-email",dataType:"json",data:{email:r}}).done(function(e){function t(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function n(){0===r.length&&($("#email_error").html(""),$("#email_ok").html(""))}e.status?(n(),t(r)?($("#email_error").addClass("custom-error").html(e.fail),$("#email_ok").html(""),hasEmailError=!0,enableDisableButton()):$("#email_error").html("")):(n(),(t(r)?$("#email_error"):$("#email_ok")).html(""),hasEmailError=!1,enableDisableButton())})})});