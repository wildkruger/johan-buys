"use strict";function restrictNumberToPrefdecimalOnInput(e){let currencyType=$("select#fromCurrencyWallet option:selected").data("type");restrictNumberToPrefdecimal(e,currencyType)}function determineDecimalPoint(){var currencyType=$("select#fromCurrencyWallet").find(":selected").data("type");"crypto"==currencyType?($("#formattedFeesPercentage, #formattedFeesFixed, #formattedTotalFees").text(CRYPTODP),$("#amount").attr("placeholder",CRYPTODP),$("#convertedAmount").attr("placeholder",CRYPTODP)):"fiat"==currencyType&&($("#formattedFeesPercentage, #formattedFeesFixed, #formattedTotalFees").text(FIATDP),$("#amount").attr("placeholder",FIATDP),$("#convertedAmount").attr("placeholder",FIATDP))}function hideExchangeRateGetAmountDiv(){$("#exchangeRateDiv").addClass("d-none")}function disableSubmitBtn(btnId,btnTextId,submitButtonText){$(btnId).attr("disabled",!0),$(btnTextId).text(submitButtonText)}if($(".main-containt").find("#exchangeMoneyCreate").length){function checkAmountLimitAndFeesLimit(){let amount=$("#amount").val().trim(),fromCurrencyId=$("#fromCurrencyWallet").val();if(amount>0&&fromCurrencyId)return new Promise((function(resolve,reject){$.ajax({method:"POST",url:amountLimitCheckUrl,dataType:"json",data:{_token:csrfToken,amount:amount,currency_id:fromCurrencyId,transaction_type_id:transactionTypeId}}).done((function(response){200==response.success.status?($("#feesPercentage").val(response.success.feesPercentage),$("#feesFixed").val(response.success.feesFixed),$("#totalFees").val(response.success.totalFees),$("#formattedFeesPercentage").html(response.success.pFeesHtml),$("#formattedFeesFixed").html(response.success.fFeesHtml),$("#formattedTotalFees").html(response.success.totalFeesHtml),response.success.totalAmount>response.success.balance||""==amount?($("#amountLimitError").html(lowBalanceText),$("#exchangeMoneyCreateSubmitBtn").attr("disabled",!0),$("#convertedAmount").val(""),hideExchangeRateGetAmountDiv(),resolve(!1)):($("#amountLimitError").html(""),$("#exchangeMoneyCreateSubmitBtn").removeAttr("disabled"),resolve(!0))):($("#amountLimitError").text(response.success.message),$("#exchangeMoneyCreateSubmitBtn").attr("disabled",!0),$("#convertedAmount").val(""),hideExchangeRateGetAmountDiv(),resolve(!1))}))}))}function getConvertedCurrencies(fromCurrencyId){return new Promise((function(resolve,reject){$.post({url:currencyListExceptSelectedUrl,dataType:"json",data:{_token:csrfToken,currency_id:fromCurrencyId}}).done((function(response){let options="";$.each(response.currencies,(function(key,value){options+=`<option value="${value.id}" ${value.id==convertedCurrency?"selected":""}   data-toWalletCode="${value.code}">${value.code}</option>`})),$("#toCurrencyWallet").html(options),resolve()}))}))}function getBalanceOfSelectedCurrencyWallet(currencyId){return new Promise((function(resolve,reject){$.post({url:walletBalanceUrl,dataType:"json",data:{_token:csrfToken,currency_id:currencyId}}).done((function(response){resolve(response)}))}))}function getAmountFromGive(){let amount=$("#amount").val().trim(),fromWalletCurrencyId=$("#fromCurrencyWallet").val(),toWalletCurrencyId=$("#toCurrencyWallet").val(),fromWalletCurrencyCode=$("#fromCurrencyWallet").find(":selected").text(),toWalletCurrencyCode=$("#toCurrencyWallet").find(":selected").text(),fromWalletCurrencyIdLstorage=$("#fromCurrencyWallet").find(":selected").val(),toWalletCurrencyIdLstorage=$("#toCurrencyWallet").find(":selected").val();toWalletCurrencyId&&fromWalletCurrencyCode&&$.isNumeric(amount)?$.post({url:exchangeRateUrl,dataType:"json",data:{_token:csrfToken,amount:amount,fromWallet:fromWalletCurrencyId,toWallet:toWalletCurrencyId,fromWalletCode:fromWalletCurrencyCode,toWalletCode:toWalletCurrencyCode},success:function(response){response.status?(amount>0||""!=amount)&&""!=fromWalletCurrencyId&&""!=toWalletCurrencyId&&($("#exchangeRateDiv").removeClass("d-none"),$("#exchangeRateFromWalletCode").text(fromWalletCurrencyCode),$("#convertedAmount").val(response.getAmountMoneyFormatHtml),$("#exchangeRate").text(response.destinationCurrencyRate),$("#exchangeRateToWalletCode").text(response.destinationCurrencyCode),$("#finalAmount").val(amount*response.destinationCurrencyRate),localStorage.setItem("fromWalletCurrencyIdLstorage",fromWalletCurrencyIdLstorage),localStorage.setItem("toWalletCurrencyIdLstorage",toWalletCurrencyIdLstorage),localStorage.setItem("amountLstorage",amount)):(determineDecimalPoint(),hideExchangeRateGetAmountDiv())},error:function(error){Swal.fire(failedText,JSON.parse(error.responseText).message,"error").then(result=>{result.isConfirmed&&window.location.reload()})}}):($("#exchangeRateDiv").addClass("d-none"),$("#convertedAmount").text(""))}$(window).on("load",(function(){determineDecimalPoint(),hideExchangeRateGetAmountDiv();let fromCurrencyWalletId=$("#fromCurrencyWallet").val();""!=fromCurrencyWalletId&&getBalanceOfSelectedCurrencyWallet(fromCurrencyWalletId).then(object=>{$("#fromCurrencyWalletBalanceDiv").removeClass("d-none"),$("#fromWalletCurrencyBalance").text(object.balance),$("#fromWalletCurrencyCode").text(object.currencyCode)}).then(()=>{getConvertedCurrencies(fromCurrencyWalletId).then(()=>{let toCurrencyWalletId=$("#toCurrencyWallet").val();""!=toCurrencyWalletId&&getBalanceOfSelectedCurrencyWallet(toCurrencyWalletId).then(object=>{object.status?($("#toCurrencyWalletBalanceDiv").removeClass("d-none"),$("#toWalletCurrencyBalance").text(object.balance),$("#toWalletCurrencyCode").text(object.currencyCode)):$("#toCurrencyWalletBalanceDiv").addClass("d-none")})})}).then(()=>{let amount=$("#amount").val().trim(),toCurrencyWalletId=$("#toCurrencyWallet").val();$.isNumeric(amount)&&amount>0&&""!=fromCurrencyWalletId&&checkAmountLimitAndFeesLimit().then(status=>{status&&""!=toCurrencyWalletId&&getAmountFromGive()})})})),$("#fromCurrencyWallet").on("change",(function(){let fromCurrencyWalletId=$(this).val();""!=fromCurrencyWalletId&&getBalanceOfSelectedCurrencyWallet(fromCurrencyWalletId).then(object=>{$("#fromCurrencyWalletBalanceDiv").removeClass("d-none"),$("#fromWalletCurrencyBalance").text(object.balance),$("#fromWalletCurrencyCode").text(object.currencyCode)}).then(()=>{getConvertedCurrencies(fromCurrencyWalletId).then(()=>{let toCurrencyWalletId=$("#toCurrencyWallet").val();""!=toCurrencyWalletId&&getBalanceOfSelectedCurrencyWallet(toCurrencyWalletId).then(object=>{object.status?($("#toCurrencyWalletBalanceDiv").removeClass("d-none"),$("#toWalletCurrencyBalance").text(object.balance),$("#toWalletCurrencyCode").text(object.currencyCode)):$("#toCurrencyWalletBalanceDiv").addClass("d-none")})})});let amount=$("#amount").val().trim();$.isNumeric(amount)&&amount>0&&""!=fromCurrencyWalletId&&checkAmountLimitAndFeesLimit().then(status=>{let toCurrencyWalletId=$("#toCurrencyWallet").val();status&&""!=toCurrencyWalletId&&getAmountFromGive()})})),$("#toCurrencyWallet").on("change",(function(){let toCurrencyWalletId=$(this).val();""!=toCurrencyWalletId&&getBalanceOfSelectedCurrencyWallet(toCurrencyWalletId).then(object=>{object.status?($("#toCurrencyWalletBalanceDiv").removeClass("d-none"),$("#toWalletCurrencyBalance").text(object.balance),$("#toWalletCurrencyCode").text(object.currencyCode)):$("#toCurrencyWalletBalanceDiv").addClass("d-none")});let amount=$("#amount").val().trim(),fromCurrencyWalletId=$("#fromCurrencyWallet").val();$.isNumeric(amount)&&amount>0&&""!=fromCurrencyWalletId&&checkAmountLimitAndFeesLimit().then(status=>{status&&""!=toCurrencyWalletId&&getAmountFromGive()})})),$("#amount").on("input",$.debounce(800,(function(){let amount=$(this).val().trim(),fromCurrencyWalletId=$("#fromCurencyWallet").val(),toCurrencyWalletId=$("#toCurencyWallet").val();$.isNumeric(amount)&&amount>0&&""!=fromCurrencyWalletId?checkAmountLimitAndFeesLimit().then(status=>{status&&""!=toCurrencyWalletId&&getAmountFromGive()}):""==amount&&($("#convertedAmount").val(""),$("#amountLimitError").text(""),determineDecimalPoint(),hideExchangeRateGetAmountDiv())}))),$("#exchangeMoneyCreateForm").on("submit",(function(){setTimeout((function(){$("#exchangeMoneyCreateSubmitBtn").removeAttr("disabled"),$(".spinner").addClass("d-done"),$("#exchangeMoneyCreateSubmitBtnText").html("Proceed"),$("#sendMoneySvgIcon").removeClass("d-none")}),2e3),$(".spinner").removeClass("d-none"),$("#exchangeMoneySvgIcon").addClass("d-none"),$("#exchangeMoneyCreateSubmitBtn").attr("disabled",!0),$("#exchangeMoneyCreateSubmitBtnText").text(submitBtnText)}))}$(".main-containt").find("#exchangeMoneyConfirm").length&&$("#exchangeMoneyConfirmForm").on("submit",(function(){$("#exchangeMoneyConfirmBtn").attr("disabled",!0),$("#exchangeMoneyBackButton").removeAttr("href"),$(".spinner").removeClass("d-none"),$("#exchangeMoneyConfirmBtnText").text(confirmBtnText)}));