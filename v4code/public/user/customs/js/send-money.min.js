"use strict";function restrictNumberToPrefdecimalOnInput(e){let type=$("#wallet").find(":selected").attr("data-type");restrictNumberToPrefdecimal(e,type)}function determineDecimalPoint(){let currencyType=$("#wallet").find(":selected").attr("data-type");"crypto"==currencyType?($("#formattedFeesPercentage, #formattedFeesFixed, #formattedTotalFees").text(CRYPTODP),$("#amount").attr("placeholder",CRYPTODP)):"fiat"==currencyType&&($("#formattedFeesPercentage, #formattedFeesFixed, #formattedTotalFees").text(FIATDP),$("#amount").attr("placeholder",FIATDP))}if($(".main-containt").find("#sendMoneyCreate").length){let recipientErrorFlag=!1,amountErrorFlag=!1;function enableDisableButton(){recipientErrorFlag||amountErrorFlag?$("#sendMoneyCreateSubmitBtn").attr("disabled",!0):$("#sendMoneyCreateSubmitBtn").attr("disabled",!1)}function getStringAfterPlusSymbol(str){return str.split("+")[1]}function emailPhoneValidationCheck(emailOrPhone,sendOrRequestSubmitButton){emailOrPhone&&0!=emailOrPhone.length?"email"==processedBy?validateEmail(emailOrPhone)?($(".receiverError").html(""),recipientErrorFlag=!1,enableDisableButton()):($(".receiverError").html(validEmailMessage).insertAfter($("#receiver")),recipientErrorFlag=!0,enableDisableButton()):"phone"==processedBy?"+"==emailOrPhone.charAt(0)&&$.isNumeric(getStringAfterPlusSymbol(emailOrPhone))?($(".receiverError").html(""),recipientErrorFlag=!1,enableDisableButton()):($(".receiverError").html(validPhoneMessage).insertAfter($("#receiver")),recipientErrorFlag=!0,enableDisableButton()):"email_or_phone"==processedBy&&("+"==emailOrPhone.charAt(0)&&$.isNumeric(getStringAfterPlusSymbol(emailOrPhone))?($(".receiverError").html(""),recipientErrorFlag=!1,enableDisableButton()):validateEmail(emailOrPhone)?($(".receiverError").html(""),recipientErrorFlag=!1,enableDisableButton()):($(".receiverError").html(validEmailOrPhoneMessage).insertAfter($("#receiver")),recipientErrorFlag=!0,enableDisableButton())):($(".receiverError").html(""),recipientErrorFlag=!1,enableDisableButton())}function receiverAccountStatusCheck(){let receiver=$("#receiver").val().trim();""!=receiver?$.ajax({method:"POST",url:receiverStatusUrl,dataType:"json",data:{_token:token,receiver:receiver}}).done((function(response){response.status||404==response.status?($(".receiverError").html(response.message).insertAfter($("#receiver")),recipientErrorFlag=!0,enableDisableButton()):($(".receiverError").html(""),recipientErrorFlag=!1,enableDisableButton())})):$(".receiverError").html("")}function checkAmountLimitAndFeesLimit(){let amount=$("#amount").val(),wallet_id=$("#wallet").val();0===amount.length?($(".amount-limit-error").hide(),determineDecimalPoint()):($(".amount-limit-error").show("d-none"),amount>0&&wallet_id&&$.ajax({method:"POST",url:checkAmountLimitUrl,dataType:"json",data:{_token:token,amount:amount,wallet_id:wallet_id,transaction_type_id:transactionTypeId}}).done((function(response){receiverAccountStatusCheck(),200==response.success.status?($("#feesFixed").val(response.success.feesFixed),$("#feesPercentage").val(response.success.feesPercentage),$("#totalFees").val(response.success.totalFees),$("#formattedFeesFixed").html(response.success.fFeesHtml),$("#formattedFeesPercentage").html(response.success.pFeesHtml),$("#formattedTotalFees").html(response.success.totalFeesHtml),$(".amount-limit-error").text(""),amountErrorFlag=!1,enableDisableButton(),response.success.totalAmount>response.success.balance&&($(".amount-limit-error").text(lowBalanceText).insertAfter($("#amount")),amountErrorFlag=!0,enableDisableButton())):($(".amount-limit-error").text(response.success.message).insertAfter($("#amount")),amountErrorFlag=!0,enableDisableButton())})))}var lastCurrencyType,currenctCurrencyType;$(window).on("load",(function(){let emailOrPhone=$("#receiver").val().trim();null!=emailOrPhone&&emailPhoneValidationCheck(emailOrPhone,$("#sendMoneyCreateSubmitBtn")),checkAmountLimitAndFeesLimit()})),$(document).on("input","#receiver",$.debounce(700,(function(){let emailOrPhone=$("#receiver").val().trim();null!=emailOrPhone&&(emailPhoneValidationCheck(emailOrPhone,$("#sendMoneyCreateSubmitBtn")),receiverAccountStatusCheck())}))),$("#amount").on("input",$.debounce(1e3,(function(){checkAmountLimitAndFeesLimit()}))),$("select").change((function(){lastCurrencyType="undefined"!==$(this).attr("data-old")?$(this).attr("data-old"):"",currenctCurrencyType=$("option:selected",this).data("type"),$(this).attr("data-old",currenctCurrencyType)})).change(),$("#wallet").on("change",(function(){lastCurrencyType!==currenctCurrencyType&&$("#amount").val(""),$(".amount-limit-error").text(""),determineDecimalPoint(),checkAmountLimitAndFeesLimit()})),$("#sendMoneyCreateForm").on("submit",(function(){setTimeout((function(){$("#sendMoneyCreateSubmitBtn").removeAttr("disabled"),$(".spinner").addClass("d-done"),$("#sendMoneyCreateSubmitBtnText").html("Proceed"),$("#sendMoneySvgIcon").removeClass("d-none")}),2e3),$(".spinner").removeClass("d-none"),$("#sendMoneySvgIcon").addClass("d-none"),$("#sendMoneyCreateSubmitBtn").attr("disabled",!0),$("#sendMoneyCreateSubmitBtnText").text(submitBtnText)}))}$(".main-containt").find("#sendMoneyConfirm").length&&$("#sendMoneyConfirmForm").on("submit",(function(){$("#sendMoneyConfirmBtn").attr("disabled",!0),$("#sendMoneyBackButton").removeAttr("href"),$(".spinner").removeClass("d-none"),$("#sendMoneyConfirmBtnText").text(confirmBtnText)}));