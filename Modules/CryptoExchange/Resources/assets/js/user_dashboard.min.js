"use strict";function restrictNumberToPrefdecimalOnInput(e){let type;restrictNumberToPrefdecimal(e,"crypto")}function formatNumberToPrefDecimal(num=0){let decimalFormat=decimalPreferrence;return num=Math.abs(num).toFixed(decimalFormat)}if($(".main-content").find("#crypto_exchange_user").length){function beforeLoad(getAmount=null){$(".rate").text(""),$(".exchange_fee").text(""),$(".direction_error").text(""),$("#crypto_buy_sell_button").attr("disabled",!0),getAmount?$("#send_amount").val("-"):$("#get_amount").val("-")}function getDirectionTabAmount(fromCurrencyId,toCurrencyId,sendAmount=null,getAmount=null){let token=$("#token").val();fromCurrencyId&&toCurrencyId?$.ajax({method:"GET",url:directionAmountUrl,dataType:"json",cache:!1,data:{_token:token,from_currency_id:fromCurrencyId,to_currency_id:toCurrencyId,send_amount:sendAmount,get_amount:getAmount}}).done((function(response){$(".send_amount_error").text(""),$("#send_amount").val(response.success.send_amount),$("#get_amount").val(response.success.get_amount),$(".rate").text(response.success.exchange_rate),$(".exchange_fee").text(response.success.exchange_fee),200==response.success.status?$("#crypto_buy_sell_button").attr("disabled",!1):($(".send_amount_error").addClass("error").text(response.success.message),$("#crypto_buy_sell_button").attr("disabled",!0)),$("input").prop("disabled",!1)})):($("#crypto_buy_sell_button").attr("disabled",!0),$(".direction_error").addClass("error").text(directionNotAvaillable),$("#get_amount").val(0))}function getCurrenciesExceptFromCurrencyType(fromCurrencyId,type){let token=$("#token").val();fromCurrencyId&&type&&$.ajax({method:"GET",url:directionListUrl,dataType:"json",cache:!1,data:{_token:token,type:type,from_currency_id:fromCurrencyId}}).done((function(response){let toOptions="";$.each(response.directionCurrencies,(function(key,value){toOptions+=`<option value="${value.id}" >${value.code}</option>`})),$("#to_currency").html(toOptions);let fromCurrencyId=$("#from_currency").val(),toCurrencyId=$("#to_currency").val(),sendAmount=$("#send_amount").val();fromCurrencyId&&toCurrencyId&&sendAmount&&getDirectionAmount(fromCurrencyId,toCurrencyId,sendAmount)}))}function getDirectionAmount(fromCurrencyId,toCurrencyId,sendAmount=null,getAmount=null){let token=$("#token").val();fromCurrencyId&&toCurrencyId&&$.ajax({method:"GET",url:directionAmountUrl,dataType:"json",cache:!1,data:{_token:token,from_currency_id:fromCurrencyId,to_currency_id:toCurrencyId,send_amount:sendAmount,get_amount:getAmount}}).done((function(response){$(".send_amount_error").text(""),$("#send_amount").val(response.success.send_amount),$("#get_amount").val(response.success.get_amount),$(".rate").text(response.success.exchange_rate),$(".exchange_fee").text(response.success.exchange_fee),$(".flash-container").hide(),200==response.success.status?$("#crypto_buy_sell_button").attr("disabled",!1):($(".send_amount_error").addClass("error").text(response.success.message),$("#crypto_buy_sell_button").attr("disabled",!0)),$("input").prop("disabled",!1)}))}function getCurrenciesByType(directionType){let token=$("#token").val();directionType&&$.ajax({method:"GET",url:directionTypeUrl,dataType:"json",cache:!1,data:{_token:token,direction_type:directionType}}).done((function(response){let fromOptions="";$.each(response.fromCurrencies,(function(key,value){fromOptions+=`<option value="${value.from_currency.id}" >${value.from_currency.code}</option>`})),$("#from_currency").html(fromOptions);let toOptions="";$.each(response.toCurrencies,(function(key,value){toOptions+=`<option value="${value.id}" >${value.code}</option>`})),$("#to_currency").html(toOptions);let text="401"==response.status?directionNotAvaillable:"";$(".direction_error").addClass("error").text(text),localStorage.getItem("from_currency")&&localStorage.getItem("to_currency")&&($("#from_currency").val(localStorage.getItem("from_currency")),$("#to_currency").val(localStorage.getItem("to_currency")),localStorage.removeItem("from_currency"),localStorage.removeItem("to_currency"));let fromCurrencyId=$("#from_currency").val(),toCurrencyId=$("#to_currency").val(),sendAmount=$("#send_amount").val();fromCurrencyId&&toCurrencyId&&sendAmount&&getDirectionTabAmount(fromCurrencyId,toCurrencyId,sendAmount)}))}$(window).on("load",(function(){beforeLoad(),$(".spinner").addClass("fa fa-spinner fa-spin displaynone"),$("#rp_text").text(nextText);let previousUrl=localStorage.getItem("previousUrl"),confirmationUrl;if(SITE_URL+"/crypto-exchange/confirm"==previousUrl){var exchangeType=localStorage.getItem("exchangeType"),sendAmount=localStorage.getItem("defaultAmnt");$("#send_amount").val(sendAmount),$("."+exchangeType).trigger("click"),localStorage.removeItem("previousUrl")}let fromCurrencyId=$("#from_currency").val(),toCurrencyId=$("#to_currency").val();var sendAmount=$("#send_amount").val();fromCurrencyId&&toCurrencyId&&getDirectionTabAmount(fromCurrencyId,toCurrencyId,sendAmount)})),$(document).on("change","#from_currency",(function(){beforeLoad();let fromCurrencyId=$("#from_currency").val(),type=$("#from_type").val();fromCurrencyId&&type&&getCurrenciesExceptFromCurrencyType(fromCurrencyId,type)})),$(document).on("change","#to_currency",(function(){beforeLoad();let fromCurrencyId=$("#from_currency").val(),toCurrencyId=$("#to_currency").val(),sendAmount=$("#send_amount").val();fromCurrencyId&&toCurrencyId&&sendAmount&&getDirectionAmount(fromCurrencyId,toCurrencyId,sendAmount)})),$(document).on("keyup","#send_amount",$.debounce(700,(function(){beforeLoad();let fromCurrencyId=$("#from_currency").val(),toCurrencyId=$("#to_currency").val(),sendAmount=$("#send_amount").val();fromCurrencyId&&toCurrencyId&&sendAmount&&getDirectionAmount(fromCurrencyId,toCurrencyId,sendAmount)}))),$(document).on("keyup","#get_amount",$.debounce(700,(function(){let fromCurrencyId=$("#from_currency").val(),toCurrencyId=$("#to_currency").val(),getAmount=$("#get_amount").val();beforeLoad(getAmount),fromCurrencyId&&toCurrencyId&&getAmount&&getDirectionAmount(fromCurrencyId,toCurrencyId,null,getAmount)}))),$(document).on("click",".crypto",(function(){beforeLoad();let type=$(this).attr("data-type");$(".crypto").removeClass("active"),$(this).addClass("active"),$(".send_amount_error").text(""),$("#from_type").val(type),getCurrenciesByType(type)})),$(document).on("submit","#crypto-send-form",(function(){$("#crypto_buy_sell_button").attr("disabled",!0),$(".spinner").removeClass("displaynone");var pretext=$("#rp_text").text();$("#rp_text").text(exchangeText),setTimeout((function(){$("#rp_text").text(pretext),$("#crypto_buy_sell_button").removeAttr("disabled"),$(".spinner").addClass("displaynone")}),1e3)}))}if($(".main-content").find("#crypto_exchange_details").length){function exchangeBack(){localStorage.setItem("previousUrl",document.URL),localStorage.setItem("exchangeType",exchangeTypeValue),localStorage.setItem("from_currency",fromCurrencyValue),localStorage.setItem("to_currency",toCurrencyValue),localStorage.setItem("defaultAmnt",defaultAmnt),history.back()}function paymentOption(){"others"==$("#pay_with").val()?($("#payment_details").show(),$(".payment_details").attr("disabled",!1)):($("#payment_details").hide(),$(".payment_details").attr("disabled",!0)),walletCheck()}function receiveOption(){"address"==$("#receive_with").val()?($("#crypto_address_section").css("display","block"),$(".crypto_address").attr("disabled",!1)):($("#crypto_address_section").css("display","none"),$(".crypto_address").attr("disabled",!0))}function walletCheck(){let token=$("#token").val();"others"==$("#pay_with").val()?($(".wallet-error").removeClass("error").text(""),$("#exchange-confirm-submit-btn").attr("disabled",!1)):$.ajax({method:"GET",url:walletCheckUrl,dataType:"json",cache:!1,data:{_token:token}}).done((function(response){200==response.success.status?($(".wallet-error").removeClass("text-danger").text(""),$("#exchange-confirm-submit-btn").attr("disabled",!1)):($(".wallet-error").addClass("text-danger").text(response.success.message),$("#exchange-confirm-submit-btn").attr("disabled",!0))}))}$(window).on("load",(function(){paymentOption()})),$(document).on("change","#pay_with",(function(){paymentOption()})),$(document).on("change","#file",(function(){var ext=$("#file").val().replace(/^.*\./,"");let fileInput=document.getElementById("file");const fileTypes=extensions;return fileTypes.includes(ext)?($(".file-error").removeClass("error").text(""),!0):(fileInput.value="",$(".file-error").addClass("error").text(invalidFileText),$("#fileSpan").fadeIn("slow").delay(2e3).fadeOut("slow"),!1)})),$(document).on("change","#receive_with",(function(){receiveOption()})),$(document).on("submit","#crypto_buy_sell_from",(function(){$("#exchange-confirm-submit-btn").attr("disabled",!0),localStorage.removeItem("previousUrl"),localStorage.removeItem("from_currency"),localStorage.removeItem("to_currency"),$(".fa-spin").removeClass("displaynone")})),$(document).on("click",".exchange-confirm-back-btn",(function(e){e.preventDefault(),exchangeBack()})),$("#copyButton, #merchantAddress").on("click",(function(){let address=$("#merchantAddress").text(),elem=document.createElement("textarea");document.body.appendChild(elem),elem.value=address,elem.select(),document.execCommand("copy"),document.body.removeChild(elem),$("#copyButton").addClass("d-none"),$(".copyText").removeClass("d-none")}))}